<div class="pageContainer">
<div class="pageMiddle">
	<div id='usersArea'>
		<div class="_loading"><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></div>
		<div class="row">		
		<div class="col-xs-6">			
			<div class="col-md-6 "></div>
			<div class="col-md-6 "></div>
			
		</div>
		<div class="col-xs-6">
			
			<div class="col-md-6 "></div>
			<div class="col-md-6 "></div>
			
		</div>
		</div>
	</div>
	<!-- single user -->
	<div class="singleUser">
		<div class="row">
		<div class="col-sm-6">
			<button  class="btn btn-default">返回</button><br>
			<img src=''>
		</div>
		<div class="col-sm-6">
			<div id='singleuser_username'></div>
			<div id='singleuser_article'></div>
			<div id='singleuser_schedule'></div>
		</div>
	</div>
	</div>

</div>
</div>
<script>
$('._loading').css('display','block');
	AjaxPost(
		'user/users',
		'',
		function(res){
			for(var i=0;i<res.length;i++){
					var count=i%4;
					var img='img/icon.png';					
					if(res[i].Usericon){
					$('#usersArea').find('.col-md-6').eq(count)
					.prepend('<div class="users"><p>'+res[i].Username
						+'</p><p><img src="'+res[i].Usericon+'"></p></div>');
					}
					else{
					$('#usersArea').find('.col-md-6').eq(count)
					.prepend('<div class="users"><p>'+res[i].Username
						+'</p><p><img src="'+img+'"></p></div>');
					}
				}
				UserClick();
				$('._loading').css('display','none');
			}
		)
function UserClick(){
	$('.users').click(function(){
		block();
		var single=$('.singleUser'),
			name=$(this).children().text(),
			img=$(this).find('img').attr('src');
		AjaxPost('user/personal',{name:name},function(res){
			$('#usersArea').css('display','none')
			single.css('display','block')
			single.find('img').attr('src',img)
			$('#singleuser_username').text('User Name:'+name)
		$('#singleuser_article').text('文章: ')
		
		for(let i in res.articles){
			console.log(res.articles[i].Title)
			$('#singleuser_article')
			.append('<p href="singleArticle" reload="true">'+res.articles[i].Title+'</p>')
			.find('p').last()
			.click(function(){
			_goback='users';
			console.log(res.articles[i].Title)
			_articleObj.title=res.articles[i].Title,
			_articleObj.author=res.articles[i].Username,
			_articleObj.date=res.articles[i].Date,
			_articleObj.id=res.articles[i]._id;
			HeaderButton($(this));
			})
		}
		$('#singleuser_schedule').text('行程: ')
		if(res.schedules){
		for (var i = 0; i <res.schedules.length; i++) {
				var title=res.schedules[i].Title,
					place=res.schedules[i].Places,
					mode=res.schedules[i].Modes;
				$('#singleuser_schedule').append(
					'<p href="schedule" reload="true">'
					+title+'</p>')
					.find('p').last().on('click',function(){
						_display_title=title,
						_display_place=place,
						_display_mode=mode;		
						HeaderButton($(this));
					})
				
				}
			}
		close_block();
		})
	})
}
	$('.singleUser').find('button').click(function(){
		$('.singleUser').css('display','none');
		$('#usersArea').css('display','block');
	})

</script>
<style type="text/css">
	#usersArea{
		padding-top: 30px;
	}
	#usersArea img{
		width: 100%;
		display: inline-block;
	}
	.users{
		border: 1px solid lightgray;
		cursor: pointer;
	}
	.singleUser{
		display: none;
	}
	.singleUser img{
		width: 100%;
	}
	#singleuser_username{

	}
	#singleuser_article p{
		cursor:  pointer;
		background-color: lightgray;
		margin: 10px 0px 10px 0px;
		padding: 5px;
	}
	#singleuser_schedule p{
		cursor:  pointer;
		background-color: lightskyblue;
		margin: 10px 0px 10px 0px;
		padding: 5px;
	}
			
</style>