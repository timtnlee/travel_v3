<div class="pageContainer">
	<div class="map_article_title pageMiddle">	
		<div class="articleBar">
			<a href="#mapArticle" reload='true' class="btn btn-link" optional='login' id='addMapArticle'>新增地圖文章</a>
		</div>	
	
		<div id='mapArticleArea'>
			<div class="_loading"><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></div>
		</div>
	</div>
</div>

<style>
	.map_article_title{
	}
	.map_article_title img{
		width: 100px;
		display: inline;
	}
	#addMapArticle{
	}
	.map_article_title p{
		padding: 20px 10px 20px 10px;
		border-bottom: 1px solid lightgray;
		margin: 0;
		cursor: pointer;
	}
	.map_article_title p:hover{
		background-color: lightgray;
	}
	.map_article_title h3{
		padding: 15px;
		border-bottom: 1px solid lightgray;
		margin: 0;
	}
	
@media screen and (orientation:portrait) {

}
</style>


<script>
getTitle(mapArticleTitleClick);
setButton();

//var
var map,
	service,
	marker=[],
	mapArticle=[],
	pageCount=-1,
	start,
	bounds;
function setButton(){
	//
	// $('.map_article_title').find('a').unbind().click(function(e){
	// 	e.preventDefault();
	// 	HeaderButton($(this));
	// })
	//
	$('#map_goback').unbind().click(function(){
		$('.map_article_title').css('display','block');
		$('.single_map_article').css('display','none');
	})
	//
	$('.fa-chevron-left').unbind().click(function(){
		if(pageCount!=-1){
			pageCount--;
			PageEvent(pageCount);
		}			
	})
	//
	$('.fa-chevron-right').unbind().click(function(){
		if(pageCount!=marker.length-1){
			pageCount++;
			PageEvent(pageCount);
		}			
	})

}
function getTitle(callback){
$('._loading').css('display','block');
	AjaxPost(
		'article/mapArticle',
		'',
		function(res){
				for (var i = 0; i < res.length; i++) {
					$('#mapArticleArea').prepend('<p href="#singleTrip">'+res[i].Title+'</p>');
					$('#mapArticleArea').find('p').first()
						.attr('title',res[i].Title)
						.attr('date',res[i].Date)
						.attr('author',res[i].Username);
				}
				$('._loading').css('display','none');
				callback();
			})
}
function mapArticleTitleClick(){
		$('#mapArticleArea').find('p').click(function(){
			var title=$(this).attr('title'),
				date=$(this).attr('date'),
				author=$(this).attr('author');
			location.href=$(this).attr('href')
	})
}

</script>

